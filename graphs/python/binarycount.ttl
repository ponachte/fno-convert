@prefix cf: <http://www.example.com/controlflow#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix ex: <http://www.example.com#> .
@prefix fno: <https://w3id.org/function/ontology#> .
@prefix fnoc: <https://w3id.org/function/vocabulary/composition#> .
@prefix fnoi: <https://w3id.org/function/vocabulary/implementation#> .
@prefix fnom: <https://w3id.org/function/vocabulary/mapping#> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix ptype: <http://example.com/ptype#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

ex:binarycountComposition a fno:Composition ;
    fnoc:composedOf [ fnoc:mapFrom [ fnoc:constituentFunction ex:op_pow_1 ;
                    fnoc:functionOutput ex:op_powOutput ] ;
            fnoc:mapTo [ fnoc:constituentFunction ex:op_add_1 ;
                    fnoc:functionParameter ex:op_addParameter1 ] ],
        [ fnoc:mapFrom [ fnoc:constituentFunction ex:binarycount ;
                    fnoc:functionParameter ex:binarycountParameter0 ] ;
            fnoc:mapTo [ fnoc:constituentFunction ex:enumerate_1 ;
                    fnoc:functionParameter ex:enumerateParameter0 ] ],
        [ fnoc:mapFrom [ fnoc:constituentFunction ex:next_1 ;
                    fnoc:functionOutput ex:nextOutput ] ;
            fnoc:mapTo [ fnoc:constituentFunction ex:op_eq_1 ;
                    fnoc:functionParameter ex:op_eqParameter0 ] ],
        [ fnoc:mapFromTerm 2 ;
            fnoc:mapTo [ fnoc:constituentFunction ex:op_pow_1 ;
                    fnoc:functionParameter ex:op_powParameter0 ] ],
        [ fnoc:mapFromTerm 1 ;
            fnoc:mapTo [ fnoc:constituentFunction ex:op_eq_1 ;
                    fnoc:functionParameter ex:op_eqParameter1 ] ],
        [ fnoc:mapFrom [ fnoc:constituentFunction ex:enumerate_1 ;
                    fnoc:functionOutput ex:enumerateOutput ] ;
            fnoc:mapTo [ fnoc:constituentFunction ex:iter_1 ;
                    fnoc:functionParameter ex:iterParameter0 ] ],
        [ fnoc:mapFrom [ fnoc:constituentFunction ex:op_add_1 ;
                    fnoc:functionOutput ex:op_addOutput ] ;
            fnoc:mapTo [ fnoc:constituentFunction ex:binarycount ;
                    fnoc:functionParameter ex:binarycountOutput ] ],
        [ fnoc:mapFrom [ fnoc:constituentFunction ex:iter_1 ;
                    fnoc:functionOutput ex:iterOutput ] ;
            fnoc:mapTo [ fnoc:constituentFunction ex:next_1 ;
                    fnoc:functionParameter ex:nextParameter0 ] ],
        [ fnoc:mapFrom [ fnoc:constituentFunction ex:op_eq_1 ;
                    fnoc:functionOutput ex:op_eqOutput ] ;
            fnoc:mapTo [ fnoc:constituentFunction cf:if_1 ;
                    fnoc:functionParameter cf:TestParameter ] ],
        [ fnoc:mapFrom [ fnoc:constituentFunction ex:next_1 ;
                    fnoc:functionOutput ex:nextOutput ] ;
            fnoc:mapTo [ fnoc:constituentFunction ex:op_pow_1 ;
                    fnoc:functionParameter ex:op_powParameter1 ] ],
        [ fnoc:mapFromTerm 0 ;
            fnoc:mapTo [ fnoc:constituentFunction ex:op_add_1 ;
                    fnoc:functionParameter ex:op_addParameter0 ] ],
        [ fnoc:mapFrom [ fnoc:constituentFunction ex:op_add_1 ;
                    fnoc:functionOutput ex:op_addOutput ] ;
            fnoc:mapTo [ fnoc:constituentFunction ex:op_add_1 ;
                    fnoc:functionParameter ex:op_addParameter0 ] ;
            fnoc:priority ex:op_add_1 ] ;
    fnoc:represents ex:binarycount ;
    fnoc:start ex:enumerate_1 .

ex:binarycountMapping a fno:Mapping ;
    fno:function ex:binarycount ;
    fno:implementation ex:binarycountPythonImplementation ;
    fno:methodMapping [ a fnom:StringMethodMapping ;
            fnom:method-name "binarycount" ] ;
    fno:parameterMapping [ a fnom:PositionParameterMapping ;
            fnom:functionParameter ex:binarycountParameter0 ;
            fnom:implementationParameterPosition 0 ],
        [ a fnom:PropertyParameterMapping ;
            fnom:functionParameter ex:binarycountParameter0 ;
            fnom:implementationProperty "bits" ] ;
    fno:returnMapping [ a fnom:DefaultReturnMapping ;
            fnom:functionOutput ex:binarycountOutput ] .

ex:enumerateMapping a fno:Mapping ;
    fno:function ex:enumerate ;
    fno:implementation ex:enumeratePythonClass ;
    fno:methodMapping [ a fnom:StringMethodMapping ;
            fnom:method-name "enumerate" ] ;
    fno:parameterMapping [ a fnom:PositionParameterMapping ;
            fnom:functionParameter ex:enumerateParameter1 ;
            fnom:implementationParameterPosition 1 ],
        [ a fnom:PropertyParameterMapping ;
            fnom:functionParameter ex:enumerateParameter1 ;
            fnom:implementationProperty "start" ],
        [ a fnom:DefaultParameterMapping ;
            fnom:defaultValue 0 ;
            fnom:functionParameter ex:enumerateParameter1 ],
        [ a fnom:PositionParameterMapping ;
            fnom:functionParameter ex:enumerateParameter0 ;
            fnom:implementationParameterPosition 0 ],
        [ a fnom:PropertyParameterMapping ;
            fnom:functionParameter ex:enumerateParameter0 ;
            fnom:implementationProperty "iterable" ] ;
    fno:returnMapping [ a fnom:DefaultReturnMapping ;
            fnom:functionOutput ex:enumerateOutput ] .

ex:iterMapping a fno:Mapping ;
    fno:function ex:iter ;
    fno:implementation ex:iterPythonImplementation ;
    fno:methodMapping [ a fnom:StringMethodMapping ;
            fnom:method-name "iter" ] ;
    fno:parameterMapping [ a fnom:PositionParameterMapping ;
            fnom:functionParameter ex:iterParameter0 ;
            fnom:implementationParameterPosition 0 ] ;
    fno:returnMapping [ a fnom:DefaultReturnMapping ;
            fnom:functionOutput ex:iterOutput ] .

ex:nextMapping a fno:Mapping ;
    fno:function ex:next ;
    fno:implementation ex:nextPythonImplementation ;
    fno:methodMapping [ a fnom:StringMethodMapping ;
            fnom:method-name "next" ] ;
    fno:parameterMapping [ a fnom:PositionParameterMapping ;
            fnom:functionParameter ex:nextParameter0 ;
            fnom:implementationParameterPosition 0 ] ;
    fno:returnMapping [ a fnom:DefaultReturnMapping ;
            fnom:functionOutput ex:nextOutput ] .

ex:op_addMapping a fno:Mapping ;
    fno:function ex:op_add ;
    fno:implementation ex:op_addPythonImplementation ;
    fno:methodMapping [ a fnom:StringMethodMapping ;
            fnom:method-name "add" ] ;
    fno:parameterMapping [ a fnom:PositionParameterMapping ;
            fnom:functionParameter ex:op_addParameter0 ;
            fnom:implementationParameterPosition 0 ],
        [ a fnom:PositionParameterMapping ;
            fnom:functionParameter ex:op_addParameter1 ;
            fnom:implementationParameterPosition 1 ] ;
    fno:returnMapping [ a fnom:DefaultReturnMapping ;
            fnom:functionOutput ex:op_addOutput ] .

ex:op_eqMapping a fno:Mapping ;
    fno:function ex:op_eq ;
    fno:implementation ex:op_eqPythonImplementation ;
    fno:methodMapping [ a fnom:StringMethodMapping ;
            fnom:method-name "eq" ] ;
    fno:parameterMapping [ a fnom:PositionParameterMapping ;
            fnom:functionParameter ex:op_eqParameter0 ;
            fnom:implementationParameterPosition 0 ],
        [ a fnom:PositionParameterMapping ;
            fnom:functionParameter ex:op_eqParameter1 ;
            fnom:implementationParameterPosition 1 ] ;
    fno:returnMapping [ a fnom:DefaultReturnMapping ;
            fnom:functionOutput ex:op_eqOutput ] .

ex:op_powMapping a fno:Mapping ;
    fno:function ex:op_pow ;
    fno:implementation ex:op_powPythonImplementation ;
    fno:methodMapping [ a fnom:StringMethodMapping ;
            fnom:method-name "pow" ] ;
    fno:parameterMapping [ a fnom:PositionParameterMapping ;
            fnom:functionParameter ex:op_powParameter0 ;
            fnom:implementationParameterPosition 0 ],
        [ a fnom:PositionParameterMapping ;
            fnom:functionParameter ex:op_powParameter1 ;
            fnom:implementationParameterPosition 1 ] ;
    fno:returnMapping [ a fnom:DefaultReturnMapping ;
            fnom:functionOutput ex:op_powOutput ] .

ex:binarycountPythonImplementation a prov:Agent,
        fnoi:PythonFunction ;
    rdfs:label "binarycount" ;
    dcterms:description "None" ;
    fnoi:file "/home/ponachte/projects/py2rdf/describe_functions.py" ;
    fnoi:module "__main__" .

ex:iterPythonImplementation a prov:Agent,
        fnoi:PythonFunction ;
    rdfs:label "iter" ;
    dcterms:description """Get an iterator from an object.

In the first form, the argument must supply its own iterator, or be a sequence.
In the second form, the callable is called until it returns the sentinel.""" ;
    fnoi:module "builtins" .

ex:nextPythonImplementation a prov:Agent,
        fnoi:PythonFunction ;
    rdfs:label "next" ;
    dcterms:description """Return the next item from the iterator.

If default is given and the iterator is exhausted,
it is returned instead of raising StopIteration.""" ;
    fnoi:module "builtins" .

ex:op_addPythonImplementation a prov:Agent,
        fnoi:PythonFunction ;
    rdfs:label "add" ;
    dcterms:description "Same as a + b." ;
    fnoi:module "_operator" .

ex:op_eqPythonImplementation a prov:Agent,
        fnoi:PythonFunction ;
    rdfs:label "eq" ;
    dcterms:description "Same as a == b." ;
    fnoi:module "_operator" .

ex:op_powPythonImplementation a prov:Agent,
        fnoi:PythonFunction ;
    rdfs:label "pow" ;
    dcterms:description "Same as a ** b." ;
    fnoi:module "_operator" .

cf:if a prov:Entity,
        fno:Function ;
    fno:expects [ a rdf:Seq ;
            rdf:_1 cf:TestParameter ] .

ex:enumerate a prov:Entity,
        fno:Function ;
    fno:expects [ a rdf:Seq ;
            rdf:_1 ex:enumerateParameter0 ;
            rdf:_2 ex:enumerateParameter1 ] ;
    fno:name "enumerate" ;
    fno:returns [ a rdf:Seq ;
            rdf:_1 ex:enumerateOutput ] .

ex:enumeratePythonClass a prov:Agent,
        fnoi:PythonClass ;
    rdfs:label "enumerate" ;
    dcterms:description """Return an enumerate object.

  iterable
    an object supporting iteration

The enumerate object yields pairs containing a count (from start, which
defaults to zero) and a value yielded by the iterable argument.

enumerate is useful for obtaining an indexed list:
    (0, seq[0]), (1, seq[1]), (2, seq[2]), ...""" ;
    fnoi:module "builtins" .

ex:iter a prov:Entity,
        fno:Function ;
    fno:expects [ a rdf:Seq ;
            rdf:_1 ex:iterParameter0 ] ;
    fno:name "iter" ;
    fno:returns [ a rdf:Seq ;
            rdf:_1 ex:iterOutput ] .

ex:next a prov:Entity,
        fno:Function ;
    fno:expects [ a rdf:Seq ;
            rdf:_1 ex:nextParameter0 ] ;
    fno:name "next" ;
    fno:returns [ a rdf:Seq ;
            rdf:_1 ex:nextOutput ] .

ex:op_add a prov:Entity,
        fno:Function ;
    fno:expects [ a rdf:Seq ;
            rdf:_1 ex:op_addParameter0 ;
            rdf:_2 ex:op_addParameter1 ] ;
    fno:name "add" ;
    fno:returns [ a rdf:Seq ;
            rdf:_1 ex:op_addOutput ] .

ex:op_eq a prov:Entity,
        fno:Function ;
    fno:expects [ a rdf:Seq ;
            rdf:_1 ex:op_eqParameter0 ;
            rdf:_2 ex:op_eqParameter1 ] ;
    fno:name "eq" ;
    fno:returns [ a rdf:Seq ;
            rdf:_1 ex:op_eqOutput ] .

ex:op_pow a prov:Entity,
        fno:Function ;
    fno:expects [ a rdf:Seq ;
            rdf:_1 ex:op_powParameter0 ;
            rdf:_2 ex:op_powParameter1 ] ;
    fno:name "pow" ;
    fno:returns [ a rdf:Seq ;
            rdf:_1 ex:op_powOutput ] .

cf:TestParameter a fno:Parameter ;
    fno:predicate cf:test ;
    fno:type ptype:bool .

cf:if_1 fnoc:applies cf:if ;
    fnoc:false ex:next_1 ;
    fnoc:true ex:op_pow_1 .

ex:binarycountOutput a fno:Output ;
    fno:predicate ex:binarycountResult ;
    fno:type ex:AnyPythonClass .

ex:enumerateOutput a fno:Output ;
    fno:predicate ex:enumerateResult ;
    fno:type ex:enumeratePythonClass .

ex:enumerate_1 fnoc:applies ex:enumerate ;
    fnoc:next ex:iter_1 .

ex:iterOutput a fno:Output ;
    fno:predicate ex:iterResult ;
    fno:type ex:AnyPythonClass .

ex:iterParameter0 a fno:Parameter ;
    fno:predicate ex:iterParameterPred0 ;
    fno:required true ;
    fno:type ex:AnyPythonClass .

ex:iter_1 fnoc:applies ex:iter ;
    fnoc:next ex:next_1 .

ex:nextParameter0 a fno:Parameter ;
    fno:predicate ex:nextParameterPred0 ;
    fno:required true ;
    fno:type ex:AnyPythonClass .

ex:op_addParameter1 a fno:Parameter ;
    fno:predicate ex:b ;
    fno:required true ;
    fno:type ex:AnyPythonClass .

ex:op_eqOutput a fno:Output ;
    fno:predicate ex:op_eqResult ;
    fno:type ex:AnyPythonClass .

ex:op_eqParameter0 a fno:Parameter ;
    fno:predicate ex:a ;
    fno:required true ;
    fno:type ex:AnyPythonClass .

ex:op_eqParameter1 a fno:Parameter ;
    fno:predicate ex:b ;
    fno:required true ;
    fno:type ex:AnyPythonClass .

ex:op_powOutput a fno:Output ;
    fno:predicate ex:op_powResult ;
    fno:type ex:AnyPythonClass .

ex:op_powParameter0 a fno:Parameter ;
    fno:predicate ex:a ;
    fno:required true ;
    fno:type ex:AnyPythonClass .

ex:op_powParameter1 a fno:Parameter ;
    fno:predicate ex:b ;
    fno:required true ;
    fno:type ex:AnyPythonClass .

ex:binarycount a prov:Entity,
        fno:Function ;
    fno:expects [ a rdf:Seq ;
            rdf:_1 ex:binarycountParameter0 ] ;
    fno:name "binarycount" ;
    fno:returns [ a rdf:Seq ;
            rdf:_1 ex:binarycountOutput ] .

ex:binarycountParameter0 a fno:Parameter ;
    fno:predicate ex:bits ;
    fno:required true ;
    fno:type ex:AnyPythonClass .

ex:enumerateParameter0 a fno:Parameter ;
    fno:predicate ex:iterable ;
    fno:required true ;
    fno:type ex:AnyPythonClass .

ex:enumerateParameter1 a fno:Parameter ;
    fno:predicate ex:start ;
    fno:required false ;
    fno:type ex:AnyPythonClass .

ex:nextOutput a fno:Output ;
    fno:predicate ex:nextResult ;
    fno:type ex:AnyPythonClass .

ex:op_addOutput a fno:Output ;
    fno:predicate ex:op_addResult ;
    fno:type ex:AnyPythonClass .

ex:op_addParameter0 a fno:Parameter ;
    fno:predicate ex:a ;
    fno:required true ;
    fno:type ex:AnyPythonClass .

ex:op_eq_1 fnoc:applies ex:op_eq ;
    fnoc:next cf:if_1 .

ex:op_pow_1 fnoc:applies ex:op_pow ;
    fnoc:next ex:op_add_1 .

ex:next_1 fnoc:applies ex:next ;
    fnoc:iterate ex:op_eq_1 .

ex:op_add_1 fnoc:applies ex:op_add ;
    fnoc:next ex:next_1 .

ex:AnyPythonClass a prov:Agent,
        fnoi:PythonClass ;
    rdfs:label "Any" ;
    dcterms:description """Special type indicating an unconstrained type.

    - Any is compatible with every type.
    - Any assumed to have all methods.
    - All values assumed to be instances of Any.

    Note that all the above statements are true from the point of view of
    static type checkers. At runtime, Any should not be used with instance
    checks.
    """ ;
    fnoi:file "/home/ponachte/anaconda3/lib/python3.12/typing.py" ;
    fnoi:module "typing" .

